{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","service/module.js","components/Notification.js","App.js","index.js"],"names":["Persons","persons","del","personsList","map","person","i","key","name","number","onClick","id","PersonForm","props","submitHandle","changeNameHandle","changeNumberHandle","newName","newNumber","onSubmit","onChange","value","type","Filter","searchHandle","baseUrl","axios","get","then","response","data","newObject","post","res","console","log","body","catch","error","req","message","put","url","delete","status","Notification","color","style","padding","border","className","App","useState","setPersons","setNewName","setNewNumber","search","setSearch","setMessage","setColor","useEffect","module","updateNotification","setTimeout","updatePersons","reset","margin","height","e","filteredArr","filter","a","toUpperCase","includes","target","preventDefault","p","length","window","confirm","update","concat","updatedPersons","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"2NAOeA,EANC,SAAC,GAAkB,IAAjBC,EAAgB,EAAhBA,QAAQC,EAAQ,EAARA,IAChBC,EAAcF,EAAQG,KAAK,SAACC,EAAOC,GAAR,OAAa,wBAAIC,IAAG,UAAOD,EAAP,YAAYD,EAAOG,OAASH,EAAOG,KAA1C,IAAiDH,EAAOI,OAAxD,IAAgE,4BAAQF,IAAG,cAASD,GAAKI,QAAU,kBAAKR,EAAIG,EAAOM,MAAnD,aAC7G,OACC,4BAAKR,ICaIS,EAhBI,SAACC,GAAU,IACpBC,EAAuED,EAAvEC,aAAaC,EAA0DF,EAA1DE,iBAAiBC,EAAyCH,EAAzCG,mBAAoBC,EAAqBJ,EAArBI,QAASC,EAAYL,EAAZK,UACjE,OACI,0BAAMC,SAAUL,GAChB,sCACQ,2BAAOM,SAAYL,EAAkBM,MAAOJ,KAEpD,wCACU,2BAAOG,SAAUJ,EAAoBK,MAAQH,EAAWI,KAAO,YAEzE,6BACE,4BAAQA,KAAK,UAAb,UCJKC,EAND,SAAC,GAAmB,IAAlBC,EAAiB,EAAjBA,aACZ,OACA,mDAAwB,2BAAQJ,SAAYI,M,gBCH1CC,EAAU,eA2BD,EAzBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAuB5B,EAjBH,SAAAC,GAEV,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAK,GAElB,OADAC,QAAQC,IAAI,aAAaF,EAAIG,MACtBH,EAAIH,QAEZO,OAAM,SAACC,EAAMC,EAAIN,GAEd,OADFC,QAAQC,IAAI,eAAeG,GAClB,CAACA,MAAMA,EAAME,aASX,EANA,SAAC7B,EAAGoB,GAEnB,OADkBL,IAAMe,IAAN,UAAahB,EAAb,YAAwBd,GAAMoB,GACjCH,MAAK,SAAAC,GAChB,OAAOA,EAASC,SAGL,EArBA,SAACnB,GACd,IAAM+B,EAAG,UAAMjB,EAAN,YAAiBd,GACvB,OAAOe,IAAMiB,OAAOD,GAAKd,MAAK,SAAAK,GAAG,OAAEA,EAAIW,WCO3BC,EAfI,SAAC,GAAuB,IAArBL,EAAoB,EAApBA,QAAQM,EAAY,EAAZA,MACtBC,EAAQ,CACVC,QAAQ,MACRC,OAAO,aAAD,OAAeH,GACrBA,MAAM,GAAD,OAAIA,IAEb,OAAgB,OAAZN,EACK,KAGP,yBAAKU,UAAU,QAAQH,MAAQA,GAC7B,4BAAKP,KCuGEW,EA5GH,WAAM,MAEcC,mBAAS,IAFvB,mBAETnD,EAFS,KAEAoD,EAFA,OAGgBD,mBAAS,IAHzB,mBAGRnC,EAHQ,KAGCqC,EAHD,OAIoBF,mBAAS,IAJ7B,mBAIRlC,EAJQ,KAIGqC,EAJH,OAKcH,mBAAS,IALvB,mBAKRI,EALQ,KAKAC,EALA,OAMaL,mBAAS,MANtB,mBAMTZ,EANS,KAMAkB,EANA,OAOSN,mBAAS,MAPlB,mBAOTN,EAPS,KAOFa,EAPE,KAShBC,qBAAU,WACRC,IACGjC,MAAK,SAAAC,GACJwB,EAAWxB,GACX4B,EAAU5B,QAEb,IACH,IAAIiC,EAAqB,SAACtB,EAAQM,GAChCY,EAAWlB,GACXmB,EAASb,GACTiB,YAAW,WACTL,EAAW,QACV,MAIDM,EAAgB,SAAC/D,GACnBoD,EAAWpD,GACXwD,EAAUxD,IAETgE,EAAM,WACTX,EAAW,IACXC,EAAa,KA8Db,OACE,yBAAKR,MAAO,CAACmB,OAAO,SAClB,yBAAKnB,MAAS,CAACoB,OAAO,UACpB,0CACA,kBAAC,EAAD,CAAc3B,QAASA,EAASM,MAAOA,KAGzC,kBAAC,EAAD,CAAQtB,aAhDS,SAAC4C,GACpB,IAAIC,EAAcpE,EAAQqE,QAAQ,SAAAC,GAAC,OAAIA,EAAE/D,KAAKgE,cAAcC,SAASL,EAAEM,OAAOrD,MAAMmD,kBACpFf,EAAUY,MA+CR,yCACA,kBAAC,EAAD,CAAYvD,aA9CK,SAACsD,GACpBA,EAAEO,iBACF,IAAI5C,EAAW,CAACvB,KAAKS,EAAQR,OAAOS,GAGpC,GADsE,IAAtDjB,EAAQqE,QAAQ,SAAAM,GAAC,OAAGA,EAAEpE,OAAOuB,EAAUvB,QAAMqE,OAClD,CACT,IAAIC,OAAOC,QAAP,iBAAyB9D,EAAzB,eAA+C,OACnD,IAAMN,EAAKV,EAAQqE,QAAQ,SAAAM,GAAC,OAAIA,EAAEpE,OAAOuB,EAAUvB,QAAM,GAAGG,GAC5DkD,EAAclD,EAAGoB,GAAWH,MAAM,SAAAK,GAEhC,GADAC,QAAQC,IAAI,SACTF,EAAIK,MAAOwB,EAAmB,GAAD,OAAI7B,EAAIK,OAAQ,WAC3C,CACHJ,QAAQC,IAAI,SACZ,IAAI6C,EAAS/E,EAAQG,KAAK,SAAAwE,GAAC,OAAGA,EAAEjE,KAAKsB,EAAItB,GAAIsB,EAAI2C,KACjDZ,EAAcgB,GACdlB,EAAmB,GAAD,OAAI/B,EAAUvB,KAAd,6BAA8C,SAChEyD,aAKJ/B,QAAQC,IAAI,SACZ0B,EAAW9B,GAAWH,MAAM,SAAAK,GAC1BC,QAAQC,IAAI,SACZD,QAAQC,IAAI,MAAMF,GACfA,EAAIK,MAAOwB,EAAmB,GAAD,OAAI7B,EAAIK,OAAQ,QAE9CJ,QAAQC,IAAI,SACZ6B,EAAc/D,EAAQgF,OAAOhD,IAC7B6B,EAAmB,GAAD,OAAI/B,EAAUvB,KAAd,2BAA4C,SAC9DyD,SAgBqClD,iBAtDpB,SAACqD,GACxBd,EAAWc,EAAEM,OAAOrD,QAqD4DL,mBAnDvD,SAACoD,GAAD,OAAMb,EAAaa,EAAEM,OAAOrD,QAmDqEJ,QAAUA,EAASC,UAAaA,IACxJ,uCACC,kBAAC,EAAD,CAASjB,QAASuD,EAAQtD,IAtEpB,SAACS,GACZ,IAAI+D,EAASzE,EAAQqE,QAAO,SAAAM,GAAC,OAAEA,EAAEjE,KAAKA,KAAI,GAAGH,KAC5CqD,EAAclD,GAAIiB,MAAM,SAAAK,GAEvB,GADa6C,OAAOC,QAAP,yBAAiCL,EAAjC,MACF,CACT,IAAIQ,EAAiBjF,EAAQqE,QAAQ,SAAAjE,GAAM,OAAIA,EAAOM,KAAKA,KAC3DqD,EAAckB,GACdpB,EAAmB,WAAD,OAAYY,EAAZ,qBAAsC,aAEvDrC,OAAO,SAAAC,GACRwB,EAAmB,WAAD,OAAYY,EAAZ,yCAA0D,eC9ClFS,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.201f8c34.chunk.js","sourcesContent":["import React from 'react'\nconst Persons = ({persons,del}) =>{\n    const personsList = persons.map( (person,i) =><li key = {`${i}-${person.name}`}>{person.name} {person.number} <button key={`btn-${i}`} onClick= {()=> del(person.id)}>delet</button></li>)\n     return(\n      <ul>{personsList}</ul>\n     )\n   }\nexport default Persons","import React from 'react'\n const PersonForm= (props) =>{\n     let {submitHandle,changeNameHandle,changeNumberHandle ,newName ,newNumber }=props\n    return (\n        <form onSubmit={submitHandle}>\n        <div>\n          name: <input onChange = {changeNameHandle} value={newName}/>\n        </div>\n        <div>\n          number: <input onChange={changeNumberHandle} value= {newNumber} type = 'number'  />\n        </div>\n        <div>\n          <button type=\"submit\" >add</button>\n        </div>\n      </form>\n    )\n}\nexport default PersonForm","import React from 'react'\n\nconst Filter =({searchHandle})=> {\n    return (\n    <div> Filter shown with <input  onChange = {searchHandle}/></div>\n    )\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\nconst remove = (id) =>{\n  const url = `${baseUrl}/${id}`\n     return axios.delete(url).then(res=>res.status)\n}\nconst add = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(res => {\n    console.log('module res',res.body)\n    return res.data\n  })\n  .catch((error,req,res) => {\n    console.log('module error',error)\n      return {error:error.message}\n  });\n}\nconst update = (id,newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\nreturn request.then(response => {\n    return response.data\n  })\n}\nexport default { \n  getAll, \n  add, \n  update,\n  remove\n}\n","import React from 'react'\nconst Notification = ({ message,color }) => {\n    const style = {\n        padding:'0px',\n        border: `3px solid ${color}`,\n        color:`${color}`\n    }\n    if (message === null) {\n      return null\n    }\n    return (\n      <div className=\"error\" style ={style} >\n        <h2>{message}</h2>\n      </div>\n    )\n  }\n  export default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport module from './service/module'\nimport Notification from './components/Notification'\n\nconst App = () => {\n//state\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setSearch ] = useState([])\n  const [message, setMessage]= useState(null)\n  const [color, setColor]= useState(null)\n\n  useEffect(() => {\n    module.getAll()\n      .then(response => {\n        setPersons(response)\n        setSearch(response)\n      })\n  }, [])\n  let updateNotification = (message,color) =>{\n    setMessage(message)\n    setColor(color)\n    setTimeout(() => {\n      setMessage(null)\n    }, 5000);\n  }\n\n\n  let updatePersons = (persons)=>{\n    setPersons(persons)\n    setSearch(persons)  \n  }\n let reset=() =>{\n  setNewName('')\n  setNewNumber('')\n }\n  \n const del = (id) =>{\n  let target = persons.filter(p=>p.id===id)[0].name\n   module.remove(id).then (res=>{\n    let result = window.confirm(`delete contact ${target}?`)\n    if (result){\n      let updatedPersons = persons.filter( person => person.id!==id)\n      updatePersons(updatedPersons )\n      updateNotification(`Contact ${target} has been removed`,'green')  \n     }\n    }).catch( error=>{\n      updateNotification(`Contact ${target} has already been removed from server`,'red')\n    })\n  }\n  \n  const changeNameHandle = (e) =>{\n    setNewName(e.target.value)\n  }\n  const changeNumberHandle = (e) =>setNewNumber(e.target.value)\n  const searchHandle = (e) =>{\n    let filteredArr = persons.filter( a => a.name.toUpperCase().includes(e.target.value.toUpperCase()))\n    setSearch(filteredArr)\n  }\n  const submitHandle = (e) => {\n    e.preventDefault()\n    let newObject ={name:newName,number:newNumber}\n    // name is case sensitive\n    const isExist = persons.filter( p=> p.name===newObject.name).length!==0\n    if(isExist){\n      if(!window.confirm(`update ${newName}'s number?`)) return\n      const id = persons.filter( p => p.name===newObject.name)[0].id\n      module.update(id,newObject).then (res =>{\n        console.log('here1')\n        if(res.error) updateNotification(`${res.error}`,'red')\n        else {\n          console.log('here2')\n          let update = persons.map( p=> p.id===res.id? res:p )\n          updatePersons(update)\n          updateNotification(`${newObject.name} updated to the phonebook`,'green')\n          reset()\n        }\n      })\n    }\n    else{\n      console.log('here3')\n      module.add(newObject).then( res=>{\n        console.log('here4')\n        console.log(\"res\",res)\n        if(res.error) updateNotification(`${res.error}`,'red')\n        else {\n          console.log('here5')\n          updatePersons(persons.concat(res))\n          updateNotification(`${newObject.name} added to the phonebook`,'green')\n          reset()\n        }\n      })\n    }\n  }\n\n\n  return (\n    <div style={{margin:'20px'}}>\n      <div style = {{height:'120px'}}>\n        <h3 >Phonebook </h3>\n        <Notification message={message} color={color}/>\n      </div>\n     \n      <Filter searchHandle = {searchHandle}/>\n      <h3>Add a new</h3>\n      <PersonForm submitHandle ={submitHandle} changeNameHandle= {changeNameHandle} changeNumberHandle = {changeNumberHandle} newName ={newName} newNumber = {newNumber} />\n      <h2>Numbers</h2>\n       <Persons persons={search} del ={del} />\n    </div>\n  )\n}\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}